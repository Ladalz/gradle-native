digraph jniLibraryTaskGraph {
  graph [ dpi = 100, fontname="Sans"];
  node [fontname = "Sans"];
  edge [fontname = "Sans"];
  node [shape=rectangle, fixedsize=true, width=3.3, height=0.5];
  node [style=filled, fillcolor="#cfe2f3"]
  rankdir=LR

  subgraph cluster_cppLanguage {
	label = "C++ Language Plugin"
	color = black

	compileCpp [label=<compile<i>Variant</i>>]
  }

  subgraph cluster_javaLanguage {
	label = "Java Language Plugin"

	{compileJava, processResources} -> classes [dir=back]
	{rank=same compileJava processResources}
  }

  // Styling
  link [style=dashed, label=<link<i>Variant</i>>]
  sharedLibrary [style=dashed, label=<sharedLibrary<i>Variant</i>>]
  jarNative [style=dashed, label=<jar<i>Variant</i>>]
  jarJvm [label="jar"]

  // link to assemble
  compileCpp -> link -> sharedLibrary [dir=back, style=dashed]
  sharedLibrary -> jarNative [dir=back]
  {rank=same sharedLibrary jarNative}
  jarNative -> assemble [dir=back, style=dashed]

  // classes to assemble
  classes -> jarJvm [dir=back, style=dashed]
  jarJvm -> assemble [dir=back]

  // assemble & check to build
  assemble -> build [dir=back]
  check -> build [dir=back]

  // align check & clean
  check -> clean [style=invis]
  {rank=same check clean}
}
